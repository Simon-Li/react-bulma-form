!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("mobx"),require("mobx-react")):"function"==typeof define&&define.amd?define("buForm",["react","mobx","mobx-react"],t):"object"==typeof exports?exports.buForm=t(require("react"),require("mobx"),require("mobx-react")):e.buForm=t(e.react,e.mobx,e["mobx-react"])}("undefined"!=typeof self?self:this,function(e,t,n){return function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=e.label,n=e.size,a=void 0===n?"is-normal":n,r=e.alignment;return(void 0===r?f:r)===f?u.default.createElement("div",{className:"field-label "+a},u.default.createElement("label",{className:"label"},t)):u.default.createElement("label",{className:"label",style:{textAlign:"left"}},t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),d=n(1),u=a(d),c=n(2),h=n(3),m=n(4),p=a(m),f="is-horizontal",v=function(e){return e===f?{paddingTop:6}:{paddingTop:0}},y=(0,h.observer)(function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.data=n.props.data,n.setPropValue=(0,c.action)(function(e,t){n.data[e]=t}),n}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=this;this.dpInstances=[],this.props.fields.reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return"datepicker"===e.type}).forEach(function(t){var n=document.getElementsByName(t.name)[0],a=new p.default(n,{onSelect:function(n){return e.setPropValue(t.name,n)},dataFormat:"yyyy/mm/dd"});e.dpInstances.push(a)}),this.props.debug&&(0,c.autorun)(function(){console.log("[Mobx] data store",(0,c.toJS)(e.data))})}},{key:"componentWillUnmount",value:function(){this.dpInstances.length>0&&this.dpInstances.forEach(function(e){return e&&e.destroy()})}},{key:"BmText",value:function(e){var t=this,n=e.name,a=e.label,r=e.css,o=e.placeholder,i=this.props.alignment||"";return u.default.createElement("div",{className:"field "+i},u.default.createElement(s,{label:a,alignment:i}),u.default.createElement("div",{className:"field-body"},u.default.createElement("div",{className:"field"},u.default.createElement("div",{className:"control"},u.default.createElement("input",{name:n,className:"input "+r,type:"text",placeholder:o,value:this.data[n],onChange:function(e){return t.setPropValue(n,e.target.value)}})))))}},{key:"BmCheck",value:function(e){var t=this,n=e.name,a=e.label,r=e.css,o=e.options,i=this.props.alignment||"";return u.default.createElement("div",{className:"field "+i},u.default.createElement(s,{label:a,alignment:i}),u.default.createElement("div",{className:"field-body"},u.default.createElement("div",{className:"field"},u.default.createElement("div",{className:"control",style:v(i)},o.map(function(e,a){return u.default.createElement("label",{key:a,className:"checkbox"},u.default.createElement("input",{name:n,className:r,type:"checkbox",value:t.data[e.name],checked:t.data[e.name],onChange:function(n){return t.setPropValue(e.name,n.target.checked)}}),e.label)})))))}},{key:"BmSelect",value:function(e){var t=this,n=e.name,a=e.label,r=e.css,o=e.options,i=this.props.alignment||"";return u.default.createElement("div",{className:"field "+i},u.default.createElement(s,{label:a,alignment:i}),u.default.createElement("div",{className:"field-body"},u.default.createElement("div",{className:"field"},u.default.createElement("div",{className:"control"},u.default.createElement("div",{className:"select is-fullwidth"},u.default.createElement("select",{name:n,className:r,value:this.data[n],onChange:function(e){return t.setPropValue(n,e.target.value)}},o.map(function(e,t){return u.default.createElement("option",{key:t,value:e.value},e.label)})))))))}},{key:"BmRadio",value:function(e){var t=this,n=e.name,a=e.label,r=e.css,o=e.options,i=this.props.alignment||"";return u.default.createElement("div",{className:"field "+i},u.default.createElement(s,{label:a,alignment:i}),u.default.createElement("div",{className:"field-body"},u.default.createElement("div",{className:"field"},u.default.createElement("div",{className:"control",style:v(i)},o.map(function(e,a){return u.default.createElement("label",{key:a,className:"radio"},u.default.createElement("input",{name:n,className:r,type:"radio",value:e.value,checked:t.data[n]===e.value,onChange:function(){return t.setPropValue(n,e.value)}}),e.label)})))))}},{key:"BmDatePicker",value:function(e){var t=e.name,n=e.label,a=e.css,r=this.props.alignment||"",o=new Date(this.data[t]),i=(o.getMonth()%12+1).toString(),l=o.getDate().toString(),d="";return d=String.prototype.padStart?o.getFullYear()+"/"+i.padStart(2,"0")+"/"+l.padStart(2,"0"):o.getFullYear()+"/"+i+"/"+l,u.default.createElement("div",{className:"field "+r},u.default.createElement(s,{label:n,alignment:r}),u.default.createElement("div",{className:"field-body"},u.default.createElement("div",{className:"field"},u.default.createElement("div",{className:"control"},u.default.createElement("input",{name:t,className:"input "+a,type:"text",defaultValue:d})))))}},{key:"BmTextarea",value:function(e){var t=this,n=e.name,a=e.label,r=e.css,o=e.placeholder,i=this.props.alignment||"";return u.default.createElement("div",{className:"field "+i},u.default.createElement(s,{label:a,alignment:i}),u.default.createElement("div",{className:"field-body"},u.default.createElement("div",{className:"field"},u.default.createElement("div",{className:"control"},u.default.createElement("textarea",{name:n,className:"textarea "+r,type:"text",placeholder:o,value:this.data[n],onChange:function(e){return t.setPropValue(n,e.target.value)}})))))}},{key:"genElem",value:function(e){var t=this;return function(e){switch(e.type){case"text":return t.BmText(e);case"checkbox":return t.BmCheck(e);case"select":return t.BmSelect(e);case"radio":return t.BmRadio(e);case"datepicker":return t.BmDatePicker(e);case"textarea":return t.BmTextarea(e)}throw new Error("Unrecognized element type!")}(e)}},{key:"genRow",value:function(e){var t=this;return e.map(function(e,n){return u.default.createElement("div",{key:n,className:"column"},t.genElem(e))})}},{key:"genForm",value:function(e){var t=this;return e.map(function(e,n){return u.default.createElement("div",{key:n,className:"columns is-2"},t.genRow(e))})}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.fields;return u.default.createElement("form",{name:t,onSubmit:this.props.onSubmit},this.genForm(n))}}]),t}(u.default.Component));t.default=y},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t){e.exports=n},function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o={en:{weekStart:1,previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},fr:{weekStart:1,previousMonth:"Mois précédent",nextMonth:"Mois suivant",months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],monthsShort:["Jan","Fév","Mar","Avr","Mai","Juin","Juil","Auo","Sep","Oct","Nov","Déc"],weekdays:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],weekdaysShort:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},de:{weekStart:1,previousMonth:"Vorheriger Monat",nextMonth:"Nächster Monat",months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthsShort:["Jan","Febr","März","Apr","Mai","Juni","Juli","Aug","Sept","Okt","Nov","Dez"],weekdays:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],weekdaysShort:["So","Mo","Di","Mi","Do","Fr","Sa"]},tr:{weekStart:1,previousMonth:"Önceki Ay",nextMonth:"Gelecek Ay",months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],monthsShort:["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],weekdays:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],weekdaysShort:["Paz","Pzt","Sal","Çar","Per","Cum","Cmt"]},it:{weekStart:1,previousMonth:"Mese Precedente",nextMonth:"Prossimo Mese",months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],monthsShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],weekdays:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],weekdaysShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"]},th:{weekStart:1,previousMonth:"เดือนก่อนหน้า",nextMonth:"เดือนถัดไป",months:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],monthsShort:["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."],weekdays:["อาทิตย์","จันทร์","อังคาร","พุธ","พฤหัสบดี","ศุกร์","เสาร์"],weekdaysShort:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."]},hr:{weekStart:2,previousMonth:"Prošli mjesec",nextMonth:"Slijedeći mjesec",months:["siječanj","veljača","ožujak","travanj","svibanj","lipanj","srpanj","kolovoz","rujan","listopad","studeni","prosinac"],monthsShort:["sij","velj","ožu","tra","svi","lip","srp","kol","ruj","lis","stu","pro"],weekdays:["nedjelja","ponedjeljak","utorak","srijeda","četvrtak","petak","subota"],weekdaysShort:["ned","pon","uto","sri","čet","pet","sub"]},sr:{weekStart:2,previousMonth:"Prošli mesec",nextMonth:"Sledeći mesec",months:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar"],monthsShort:["jan","feb","mar","apr","maj","jun","jul","avg","sep","okt","nov","dec"],weekdays:["nedelja","ponedeljak","utorak","sreda","četvrtak","petak","subota"],weekdaysShort:["ned","pon","uto","sre","čet","pet","sub"]}},i=["click","touchstart"],s=function(){function e(t,n){a(this,e),n||(n={});var r={startDate:new Date,dataFormat:"yyyy/mm/dd",lang:"en",overlay:!1,closeOnSelect:!0,onSelect:null,onOpen:null,onClose:null,onRender:null};if(this.element="string"==typeof t?document.querySelector(t):t,!this.element)throw new Error("An invalid selector or non-DOM node has been provided.");this.parent=this.element.parentElement,this.lang=void 0!==o[this.lang]?this.lang:"en",this.options=Object.assign({},r,n),this.month=this.options.startDate.getMonth(),this.year=this.options.startDate.getFullYear(),this.open=!1,this.build()}return r(e,[{key:"build",value:function(){var e=this,t=this;if(this.datePickerContainer=document.createElement("div"),this.datePickerContainer.id="datePicker"+(new Date).getTime(),this.options.overlay&&this.datePickerContainer.classList.add("modal"),this.datePickerContainer.classList.add("datepicker"),this.calendarContainer=document.createElement("div"),this.calendarContainer.id="datePicker"+(new Date).getTime(),this.calendarContainer.classList.add("calendar"),this.renderCalendar(),this.options.overlay){var n=document.createElement("div");n.classList.add("modal-background"),this.datePickerContainer.appendChild(n)}var a=document.createElement("button");a.className="modal-close",i.forEach(function(e){a.addEventListener(e,function(e){e.preventDefault(),t.datePickerContainer.classList.remove("is-active")})}),this.datePickerContainer.appendChild(this.calendarContainer),this.datePickerContainer.appendChild(a),document.body.appendChild(this.datePickerContainer),i.forEach(function(n){e.element.addEventListener(n,function(e){e.preventDefault(),t.open?(t.hide(),t.open=!1):(t.show(),t.open=!0)})})}},{key:"renderDayName",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(e+=o[this.options.lang].weekStart;e>=7;)e-=7;return t?o[this.options.lang].weekdaysShort[e]:o[this.options.lang].weekdays[e]}},{key:"renderDay",value:function(e,t,n,a,r,o,s,l,d,u){var c=this,h=document.createElement("div"),m=document.createElement("button");return m.classList.add("date-item"),m.innerHTML=e,i.forEach(function(a){m.addEventListener(a,function(a){void 0!==c.options.onSelect&&null!=c.options.onSelect&&c.options.onSelect&&c.options.onSelect(new Date(n,t,e)),c.element.value=c.getFormatedDate(new Date(n,t,e),c.options.dataFormat),c.options.closeOnSelect&&c.hide()})}),h.classList.add("calendar-date"),h.appendChild(m),o&&h.setAttribute("disabled","disabled"),r&&h.classList.add("is-today"),a&&h.classList.add("is-active"),l&&h.classList.add("calendar-range"),d&&h.classList.add("range-start"),u&&h.classList.add("range-end"),h}},{key:"renderNav",value:function(e,t){var n=this,a=this,r=document.createElement("div");r.classList.add("calendar-nav");var s=document.createElement("div");s.classList.add("calendar-nav-left"),this.previousYearButton=document.createElement("div"),this.previousYearButton.classList.add("button"),this.previousYearButton.classList.add("is-text");var l=document.createElement("i");l.classList.add("fa"),l.classList.add("fa-backward"),this.previousYearButton.appendChild(l),i.forEach(function(e){n.previousYearButton.addEventListener(e,function(e){e.preventDefault(),a.prevYear()})}),s.appendChild(this.previousYearButton),this.previousMonthButton=document.createElement("div"),this.previousMonthButton.classList.add("button"),this.previousMonthButton.classList.add("is-text");var d=document.createElement("i");d.classList.add("fa"),d.classList.add("fa-chevron-left"),this.previousMonthButton.appendChild(d),i.forEach(function(e){n.previousMonthButton.addEventListener(e,function(e){e.preventDefault(),a.prevMonth()})}),s.appendChild(this.previousMonthButton);var u=document.createElement("div");u.innerHTML=o[this.options.lang].months[t]+" "+e;var c=document.createElement("div");c.classList.add("calendar-nav-right"),this.nextMonthButton=document.createElement("div"),this.nextMonthButton.classList.add("button"),this.nextMonthButton.classList.add("is-text");var h=document.createElement("i");h.classList.add("fa"),h.classList.add("fa-chevron-right"),this.nextMonthButton.appendChild(h),i.forEach(function(e){n.nextMonthButton.addEventListener(e,function(e){e.preventDefault(),a.nextMonth()})}),c.appendChild(this.nextMonthButton),this.nextYearButton=document.createElement("div"),this.nextYearButton.classList.add("button"),this.nextYearButton.classList.add("is-text");var m=document.createElement("i");return m.classList.add("fa"),m.classList.add("fa-forward"),this.nextYearButton.appendChild(m),i.forEach(function(e){n.nextYearButton.addEventListener("click",function(e){e.preventDefault(),a.nextYear()})}),c.appendChild(this.nextYearButton),r.appendChild(s),r.appendChild(u),r.appendChild(c),r}},{key:"renderHeader",value:function(){var e=document.createElement("div");e.classList.add("calendar-header");for(var t=0;t<7;t++){var n=document.createElement("div");n.classList.add("calendar-date"),n.innerHTML=this.renderDayName(t,!0),e.appendChild(n)}return e}},{key:"renderBody",value:function(){var e=document.createElement("div");return e.classList.add("calendar-body"),e}},{key:"renderCalendar",value:function(){var e=new Date,t=this.renderNav(this.year,this.month),n=this.renderHeader(),a=this.renderBody();this.calendarContainer.appendChild(t),this.calendarContainer.appendChild(n),this.calendarContainer.appendChild(a);var r=this.getDaysInMonth(this.year,this.month),i=new Date(this.year,this.month,1).getDay();void 0!==this.options.onRender&&null!=this.options.onRender&&this.options.onRender&&this.options.onRender(this),o[this.options.lang].weekStart>0&&(i-=o[this.options.lang].weekStart)<0&&(i+=7);for(var s=r+i,l=s;l>7;)l-=7;s+=7-l;for(var d=0;d<s;d++){var u=new Date(this.year,this.month,d-i+1),c=!1,h=!1,m=this.compareDates(u,e),p=d<i||d>=r+i,f=!1;c=!1,h=!1,u.getMonth()!==this.month&&(f=!0),a.appendChild(this.renderDay(u.getDate(),this.month,this.year,!1,m,f,p,!1,c,h))}}},{key:"prevMonth",value:function(){this.month-=1,this.adjustCalendar(),this.renderCalendar()}},{key:"nextMonth",value:function(){this.month+=1,this.adjustCalendar(),this.renderCalendar()}},{key:"prevYear",value:function(){this.year-=1,this.adjustCalendar(),this.renderCalendar()}},{key:"nextYear",value:function(){this.year+=1,this.adjustCalendar(),this.renderCalendar()}},{key:"show",value:function(){void 0!==this.options.onOpen&&null!=this.options.onOpen&&this.options.onOpen&&this.options.onOpen(this),this.datePickerContainer.classList.add("is-active"),this.options.overlay||this.adjustPosition(),this.open=!0}},{key:"hide",value:function(){this.open=!1,void 0!==this.options.onClose&&null!=this.options.onClose&&this.options.onClose&&this.options.onClose(this),this.datePickerContainer.classList.remove("is-active")}},{key:"adjustCalendar",value:function(){return this.month<0&&(this.year-=Math.ceil(Math.abs(this.month)/12),this.month+=12),this.month>11&&(this.year+=Math.floor(Math.abs(this.month)/12),this.month-=12),this.calendarContainer.innerHTML="",this}},{key:"adjustPosition",value:function(){var e,t,n;this.calendarContainer.offsetWidth,this.calendarContainer.offsetHeight,window.innerWidth||document.documentElement.clientWidth,window.innerHeight||document.documentElement.clientHeight,window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop;if("function"==typeof this.element.getBoundingClientRect)n=this.element.getBoundingClientRect(),e=n.left+window.pageXOffset,t=n.bottom+window.pageYOffset;else for(e=this.element.offsetLeft,t=this.element.offsetTop+this.element.offsetHeight;this.element=this.element.offsetParent;)e+=this.element.offsetLeft,t+=this.element.offsetTop;this.calendarContainer.style.position="absolute",this.calendarContainer.style.left=e+"px",this.calendarContainer.style.top=t+"px"}},{key:"destroy",value:function(){this.calendarContainer.remove()}},{key:"getFormatedDate",value:function(e,t){var n={d:e.getDate(),dd:e.getDate(),D:e.getDay(),m:e.getMonth()+1,mm:e.getMonth()+1,M:e.getMonth(),MM:e.getMonth(),yy:e.getFullYear().toString().substr(-2),yyyy:e.getFullYear()};return n.dd<10&&(n.dd="0"+n.dd),n.mm<10&&(n.mm="0"+n.mm),n.D=o[this.options.lang].weekdays[n.D?n.D-1:6],n.M=o[this.options.lang].monthsShort[n.M],n.MM=o[this.options.lang].months[n.MM],t.replace(/(?:[dmM]{1,2}|D|yyyy|yy)/g,function(e){return void 0!==n[e]?n[e]:e})}},{key:"isActive",value:function(){return this.calendarContainer.classList.contains("is-active")}},{key:"isDate",value:function(e){return/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())}},{key:"isLeapYear",value:function(e){return e%4==0&&e%100!=0||e%400==0}},{key:"getDaysInMonth",value:function(e,t){return[31,this.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]}},{key:"compareDates",value:function(e,t){return e.getTime()===t.getTime()}}]),e}();t.default=s}])});